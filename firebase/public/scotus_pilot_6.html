<!-- 
Scotus Mturk Experiment Code
-Dennis Luo updated 19/12/2015

General Experiment Setup process

- Create an project in Mturk, using the code below
- Click Publish and download a sample input csv
- Fill up the csv with audio clips names
- Upload the input csv
- Publish the HIT

The following changes can be made with minimal changes to the code

1) change data source
    On line 56, change the source src = "" to the directory used to store the audio clips. 

2) change attribute\qualities
    Change qualities on line 116 add or subtract based on the same format
    Change Polarities on line 121 add or subtract based on the same format
    Change number on line 131 to the number of qualities
    Add Validation with the same type of code on line 258

3) change number of ratings per HIT
    On line 98, change ratingPerHIT variable to the desired number
    Make changes to the "audio" divisions at the end of this HTML (Ensure the numbers match the number of ratingsPerHIT)

-->



<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/components/handlebars.js/master/handlebars.js" type="text/javascript" charset="utf-8"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script src="https://cdn.rawgit.com/coolaj86/knuth-shuffle/master/index.js"></script>
<script src="static/js/main.js"></script>

<style type="text/css">
.hidden {
    display: none;
}
table {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 1.428571429;
    color: #333333;
}
</style>

<!-- Generate HTML for each rating with Handlebars -->
<script id="generate-html" type="text/x-handlebars-template">
    <div class="item panel panel-info" id="recording{{num}}">

        <div class="panel-heading">Recording {{num}} of {{total}}</div>

        <div class="panel-body">
            //change the source src here to the correct directory(folder)
            <p  align="center"><audio controls="controls" id="ScotusAudioID{{num}}" preload="auto"><source src="http://projects.rcc.uchicago.edu/aclyu/oyez/{{audio_name}}" type="audio/wav" /></audio></p>
            <p><br/>1. Please provide your impression of the voice recording in the matrix below:</p>
            <table align="center">
                <tbody>
                {{#each rating}}
                <tr>
                    <td style="width: 130px; height: 25px;">{{qualfier1}}</td>
                    <td style="height: 25px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name="Scotus{{quality}}{{num}}" type="radio" value="{{rate1}}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name="Scotus{{quality}}{{num}}" type="radio" value="{{rate2}}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name="Scotus{{quality}}{{num}}" type="radio" value="{{rate3}}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="Scotus{{quality}}{{num}}" type="radio" value="{{rate4}}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="Scotus{{quality}}{{num}}" type="radio" value="{{rate5}}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="Scotus{{quality}}{{num}}" type="radio" value="{{rate6}}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="Scotus{{quality}}{{num}}" type="radio" value="{{rate7}}" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                    <td>{{qualfier2}}</td>
                </tr>
                {{/each}}
                </tbody>
            </table>
            <p><br/>2. Assuming that this is a lawyer arguing a case in front of a panel of judges, how likely do you think this lawyer will win the case?</p>
            <table align="center">
                <tbody>
                    <tr>
                        <td>Will Definitely Lose</td>
                        <td>&nbsp;&nbsp;<input name="ScotusWin{{num}}"  type="radio" value="1" />--<input name="ScotusWin{{num}}"  type="radio" value="2" />--<input name="ScotusWin{{num}}"  type="radio" value="3" />--<input name="ScotusWin{{num}}"  type="radio" value="4" />--<input name="ScotusWin{{num}}"  type="radio" value="5" />--<input name="ScotusWin{{num}}"  type="radio" value="6" />--<input name="ScotusWin{{num}}"  type="radio" value="7" />&nbsp;&nbsp;</td>
                        <td>Will Definitely Win</td>
                    </tr>
                </tbody>
            </table>
            <p><br/>3. How good is the quality of the recording?</p>
            <table align="center">
                <tbody>
                    <tr>
                        <td>Very Bad</td>
                        <td>&nbsp;&nbsp;<input name="ScotusQuality{{num}}"  type="radio" value="1" />--<input name="ScotusQuality{{num}}"  type="radio" value="2" />--<input name="ScotusQuality{{num}}"  type="radio" value="3" />--<input name="ScotusQuality{{num}}"  type="radio" value="4" />--<input name="ScotusQuality{{num}}"  type="radio" value="5" />--<input name="ScotusQuality{{num}}"  type="radio" value="6" />--<input name="ScotusQuality{{num}}"  type="radio" value="7" />&nbsp;&nbsp;</td>
                        <td>Very Good</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="panel-footer" style="text-align: center;"><button class="btn btn-disabled btn-next-tweet" disabled="disabled" name="{{num}}">Next</button></div>
    </div>
</script>

<!--If the worker has not taken this HIT before (Where the main body of the survey is)-->
<div id="workerNotFound" style="display: none;">
    <div style="margin: 20px auto; width: 800px;">
        <div class="carousel slide" data-interval="false" data-ride="carousel" data-wrap="false" id="tweets-carousel">
            <div class="carousel-inner">
                <div class="item active">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3 class="panel-title">Instructions</h3>
                        </div>

                        <div class="panel-body">
                            <ul>
                            	<li>In the following task, you will listen to a series of audio recordings from different talkers. Please follow the instructions and provide your impression of the talkers.</li>
                            	<li>There are altogether 66 questions. Please expect to spend roughly 25 minutes for all of them (approx. 20 seconds per question).</li>
                            	<li>For each question, the associated audio clip will be automatically played once when the question appears, and you may play it as many times as you like.</li>
                            	<li>Please respond as quickly as possible. Please report your first impression and do not dwell on a particular file for too long.</li>
                            	<li>Click on &quot;Next&quot; to begin the task.</li>
                            </ul>
                        </div>

                        <div class="panel-footer" style="text-align: center;"><button class="btn btn-success btn-next-instruction">Next</button></div>
                    </div>
                </div>

                <!-- Below will be the HTML generated by Handlebars for the each rating-->


                <!-- Below is the submission page-->
                <div class="item panel panel-success" id="last_carousel">
                    <div class="panel-body text-center" id="submit-button-container">
                        <p>You have finished this task. Please click &quot;Submit&quot; to proceed.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--If the worker has taken the HIT-->
<div id="workerFound" style="display: none;">It appears that you have already taken a HIT in this batch. Please return the HIT now to avoid any negative impact on your approval rating.</div>


<!-- This allows Amazon Mturk to grab audio names from an input csv file
     Needs to be changed if the number of ratings per HIT is changed.
 -->
<div class="hidden">
<p id="audio1">${ScotusAudio1}</p>

<p id="audio2">${ScotusAudio2}</p>

<p id="audio3">${ScotusAudio3}</p>

<p id="audio4">${ScotusAudio4}</p>

<p id="audio5">${ScotusAudio5}</p>

<p id="audio6">${ScotusAudio6}</p>

<p id="audio7">${ScotusAudio7}</p>

<p id="audio8">${ScotusAudio8}</p>

<p id="audio9">${ScotusAudio9}</p>

<p id="audio10">${ScotusAudio10}</p>

<p id="audio11">${ScotusAudio11}</p>

<p id="audio12">${ScotusAudio12}</p>

<p id="audio13">${ScotusAudio13}</p>

<p id="audio14">${ScotusAudio14}</p>

<p id="audio15">${ScotusAudio15}</p>

<p id="audio16">${ScotusAudio16}</p>

<p id="audio17">${ScotusAudio17}</p>

<p id="audio18">${ScotusAudio18}</p>

<p id="audio19">${ScotusAudio19}</p>

<p id="audio20">${ScotusAudio20}</p>

<p id="audio21">${ScotusAudio21}</p>

<p id="audio22">${ScotusAudio22}</p>

<p id="audio23">${ScotusAudio23}</p>

<p id="audio24">${ScotusAudio24}</p>

<p id="audio25">${ScotusAudio25}</p>

<p id="audio26">${ScotusAudio26}</p>

<p id="audio27">${ScotusAudio27}</p>

<p id="audio28">${ScotusAudio28}</p>

<p id="audio29">${ScotusAudio29}</p>

<p id="audio30">${ScotusAudio30}</p>

<p id="audio31">${ScotusAudio31}</p>

<p id="audio32">${ScotusAudio32}</p>

<p id="audio33">${ScotusAudio33}</p>

<p id="audio34">${ScotusAudio34}</p>

<p id="audio35">${ScotusAudio35}</p>

<p id="audio36">${ScotusAudio36}</p>

<p id="audio37">${ScotusAudio37}</p>

<p id="audio38">${ScotusAudio38}</p>

<p id="audio39">${ScotusAudio39}</p>

<p id="audio40">${ScotusAudio40}</p>

<p id="audio41">${ScotusAudio41}</p>

<p id="audio42">${ScotusAudio42}</p>

<p id="audio43">${ScotusAudio43}</p>

<p id="audio44">${ScotusAudio44}</p>

<p id="audio45">${ScotusAudio45}</p>

<p id="audio46">${ScotusAudio46}</p>

<p id="audio47">${ScotusAudio47}</p>

<p id="audio48">${ScotusAudio48}</p>

<p id="audio49">${ScotusAudio49}</p>

<p id="audio50">${ScotusAudio50}</p>

<p id="audio51">${ScotusAudio51}</p>

<p id="audio52">${ScotusAudio52}</p>

<p id="audio53">${ScotusAudio53}</p>

<p id="audio54">${ScotusAudio54}</p>

<p id="audio55">${ScotusAudio55}</p>

<p id="audio56">${ScotusAudio56}</p>

<p id="audio57">${ScotusAudio57}</p>

<p id="audio58">${ScotusAudio58}</p>

<p id="audio59">${ScotusAudio59}</p>

<p id="audio60">${ScotusAudio60}</p>

<p id="audio61">${ScotusAudio61}</p>

<p id="audio62">${ScotusAudio62}</p>

<p id="audio63">${ScotusAudio63}</p>

<p id="audio64">${ScotusAudio64}</p>

<p id="audio65">${ScotusAudio65}</p>

<p id="audio66">${ScotusAudio66}</p>
</div>